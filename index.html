<html>
	<head>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script> 
	<script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.2/mapbox.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox.js/v2.1.2/mapbox.css' rel='stylesheet' />
	</head>
	
	<body>
	<button onclick="getLocation()">Try It</button>
	<h3 id="demo">Click to get your coordinates</h3>
	<p id="iphone"></p>
    <div id="map" style="height:1000px"></div>
		<script>
		var x = document.getElementById("demo");
		if(navigator.userAgent.match(/iPhone/i)) {
			$("#iphone").html("You appear to be on an iPhone. Be sure that Safari is permitted to use your location in Settings > Privacy > Location Services");
			
		}

		function getLocation() {
		    if (navigator.geolocation) {
		    	$("#demo").html("Finding you on planet earth")
			navigator.geolocation.getCurrentPosition(showPosition);
		    } else {
			x.innerHTML = "Geolocation is not supported by this browser.";
		    }
		}

		function showPosition(position) {
		   // Provide your access token
            L.mapbox.accessToken = 'pk.eyJ1Ijoid2FiYXJyIiwiYSI6IkFlcVhEUnMifQ.hrdj4uPtG5A3Kp9H5PNTyQ';
            // Create a map in the div #map
            var map = L.mapbox.map('map', 'wabarr.jklp6mn0');
            map.setView([position.coords.latitude, position.coords.longitude], 15);
            L.marker([position.coords.latitude, position.coords.longitude])
                            .bindPopup("you are here!")
                            .addTo(map);
            $("#iphone").remove();
            $("button").remove();
            $("#demo").html("Here is a map of your position. Accuracy: +- " + position.coords.accuracy + " meters");


		}
		</script>


	</body>
</html>
